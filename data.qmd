---
title: Data
description: We describe the sources of our data and the cleaning process.
toc: true
draft: false
editor: 
  markdown: 
    wrap: sentence
---

![](images/Commencement2024 (1).jpg)

## Datasources

### Dataset 1: Massachusetts District Data

#### Source 
[Link to dataset](https://profiles.doe.mass.edu/statereport/)

This dataset provided by the Massachusetts Deparment of Education and Secondary Education offers comprehensive, state level education statistics. It includes data on student enrollment, academic performance, graduation rates, and demographics of the student body. It offers district-level information spanning 18 years (2006–2023). The data was complied guide educational imporvement and support policies and programs. To ensure consistency across this panel, we standardized district names and aligned year columns before merging graduation data with enrollment figures for each year. Additionally, SAT performance data was incorporated by matching district and year, with SAT scores appended only where districts already existed in the core panel. Empty cells were replaced zeros to maintain clarity during downstream processing.

#### Layout 

The main variablesfocused on in this dataset were demographics of the student body. In total there are 24 unique variables, of these 

- District Name: Name of each school district
- Perecent_Graduated: Graduation rates for the given school district in each year
- 2 Main Race variables: 
  - Perecent_Black: Percentage of student body that identifies as being Black
  - Percent_White: Percentage of student body that identifies as being White
- SAT_Reading_Writing_Mean_Score: Average Reading and Writing SAT score for school district in a given year
- SAT_Math_Mean_Score: Average Math SAT score for school district in a given year
- Low_Income_Percent: Indicates the proportion of students enrolled who come from economically disadvantaged backgrounds, based on state or federal criteria.

#### Cleaning Processs

[Cleaning Script](/scripts/new_clean_data.R)

The code executes the following operations: 

1. Loads the data from `final_merged_no_charter.csv` located in the dataset directory.
2. Removes all Technical, Vocational, Agricultural, and Virtual schools from the dataset.
3. Rearranges the dataset to list schools by district alphabetically and by year.
4. Recodes the variable names to be easier to understand and work with.
5. Saves the cleaned dataset to `massachusetts_district_data.rds` in the dataset directory. 

Some things to note, all charter, technical, vocational, agricultural, and virtual schools were removed from the dataset. When combining this dataset with another it felt prudent to remove charter schools as people from outside the school district can attend these schools. Likewise other school types that weren't strictly public were removed to make the combination process more efficient. 

#### Dataset Visualizations


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)

district_data <- read_rds(here::here("dataset","massachusetts_district_data.rds")) |>
  filter(`District Name` == "hampden-wilbraham")

ggplot(district_data, aes(x = `Year`, y = `Percent_Graduated`, fill = `Percent_Graduated`)) +
  geom_bar(stat = "identity", width = 0.5, na.rm = TRUE) +  
  labs(title = "Graduation Percentage in Hampden-Wilbraham", 
       x = "Year", 
       y = "Graduation Percentage") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)

race_distribution <- read_rds(here::here("dataset","massachusetts_district_data.rds")) |>
  filter(Year == 2022) |>
  mutate(across(starts_with("Percent_"), ~as.numeric(ifelse(. == "nill", NA, .)))) |>
  summarize(
    American_Indian = mean(Percent_American_Indian, na.rm = TRUE),
    Asian = mean(Percent_Asian, na.rm = TRUE),
    Black = mean(Percent_Black, na.rm = TRUE),
    Hispanic = mean(Percent_Hispanic, na.rm = TRUE),
    Multi_Race = mean(Percent_Multi_Race, na.rm = TRUE),
    Pacific_Islander = mean(Percent_Pacific_Islander, na.rm = TRUE),
    White = mean(Percent_White, na.rm = TRUE)
  ) |>
  pivot_longer(cols = everything(), names_to = "Race", values_to = "Percent")

ggplot(race_distribution, aes(x = "", y = Percent, fill = Race)) +
  geom_col(width = 1) +
  coord_polar("y") +
  labs(title = "Race Distribution in Massachusetts (2022)") +
  theme_void() +
  theme(legend.position = "right")

```



```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)

statewide_trend <- read_rds(here::here("dataset","massachusetts_district_data.rds")) |>
  mutate(Low_Income_Percent = as.numeric(ifelse(Low_Income_Percent == "nill", NA, Low_Income_Percent))) |>
  group_by(Year)|>
  summarize(State_Avg_Low_Income = mean(Low_Income_Percent, na.rm = TRUE))

ggplot(statewide_trend, aes(x = factor(Year), y = State_Avg_Low_Income)) +
  geom_point(size = 3, color = "darkred") +
  labs(
    title = "Statewide Low Income % – Dot Plot by Year",
    x = "Year",
    y = "Low Income (%)"
  ) +
  theme_minimal()

```


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)

sex_distribution <- read_rds(here::here("dataset","massachusetts_district_data.rds")) |>
  filter(Year == 2022) |>
  mutate(across(starts_with("Percent_"), ~as.numeric(ifelse(. == "nill", NA, .)))) |>
  summarize(
    Female = mean(Percent_Female, na.rm = TRUE),
    Male = mean(Percent_Male, na.rm = TRUE)
  ) |>
  pivot_longer(cols = everything(), names_to = "Sex", values_to = "Percent")

ggplot(sex_distribution, aes(x = "", y = Percent, fill = Sex)) +
  geom_col(width = 1) +
  coord_polar("y") +
  labs(title = "Sex Distribution in Massachusetts (2022)") +
  theme_void() +
  theme(legend.position = "right")

```



